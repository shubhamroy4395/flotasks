@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Tangerine:wght@400;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }

  /* Theme variables */
  :root, .theme-default {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;
  }

  /* Dark theme - Enhanced for accessibility and contrast */
  .theme-dark {
    --background: 230 30% 7%;    /* Deeper background #121212 */
    --foreground: 0 0% 97%;      /* Almost white for text #F7F7F7 */

    --card: 225 15% 12%;         /* Much darker grey card background #181819 */
    --card-foreground: 0 0% 98%; /* Almost white card text #FAFAFA */

    --popover: 225 15% 12%;      /* Match card background */
    --popover-foreground: 0 0% 98%; /* Match card text */

    --primary: 217 90% 65%;      /* Brighter blue for better visibility */
    --primary-foreground: 0 0% 100%; /* White text on primary buttons */

    --secondary: 215 30% 20%;    /* Darker secondary background */
    --secondary-foreground: 0 0% 98%; /* Match general text color */

    --muted: 217 30% 18%;        /* Darker muted for better contrast with content */
    --muted-foreground: 215 20% 80%; /* Lighter muted text for readability */

    --accent: 217 70% 55%;       /* Brighter accent color for emphasis */
    --accent-foreground: 0 0% 100%; /* White text on accent */

    --destructive: 0 80% 60%;    /* Brighter red for destructive actions */
    --destructive-foreground: 0 0% 100%; /* White text on destructive */

    --border: 215 25% 25%;       /* More visible borders for separation */
    --input: 215 25% 25%;        /* Match border for inputs */
    --ring: 217 90% 65%;         /* Match primary for focus rings */
  }

  /* Spring theme - Nice soft greens */
  .theme-spring {
    --background: 150 25% 94%;
    --foreground: 150 40% 20%;
    
    --card: 150 30% 88%;
    --card-foreground: 150 40% 20%;
    
    --popover: 150 30% 88%;
    --popover-foreground: 150 40% 20%;
    
    --primary: 150 60% 40%;
    --primary-foreground: 0 0% 100%;
    
    --secondary: 150 30% 80%;
    --secondary-foreground: 150 40% 20%;
    
    --muted: 150 20% 85%; 
    --muted-foreground: 150 30% 40%;
    
    --accent: 150 50% 55%;
    --accent-foreground: 150 40% 20%;
    
    --destructive: 0 70% 50%;
    --destructive-foreground: 210 50% 98%;
    
    --border: 150 30% 75%;
    --input: 150 30% 75%;
    --ring: 150 60% 40%;
  }

  /* Winter theme - Darker grays with bolder blue accents */
  .theme-winter {
    --background: 220 30% 15%;
    --foreground: 210 40% 98%;
    
    --card: 215 20% 16%;         /* Much darker grey card #1F2229 */
    --card-foreground: 210 40% 98%; /* White card text */
    
    --popover: 215 20% 16%;      /* Match card background */
    --popover-foreground: 210 40% 98%; /* Match card text */
    
    --primary: 195 90% 50%;      /* Bright blue for better visibility */
    --primary-foreground: 210 40% 98%;
    
    --secondary: 217 25% 20%;    /* Darker secondary background */
    --secondary-foreground: 210 40% 98%;
    
    --muted: 217 20% 25%;
    --muted-foreground: 215 30% 75%; /* Lighter muted text for readability */
    
    --accent: 195 90% 50%;
    --accent-foreground: 210 40% 98%;
    
    --destructive: 0 70% 50%;
    --destructive-foreground: 210 40% 98%;
    
    --border: 215 30% 25%;
    --input: 215 30% 25%;
    --ring: 195 90% 50%;
  }
  
  /* Retro Windows 98 Theme */
  .theme-retro {
    /* Windows 98 classic color scheme */
    --background: 0 0% 75%;      /* Silver background #C0C0C0 */
    --foreground: 0 0% 0%;       /* Black text */
    
    --card: 0 0% 82%;            /* Button face color #D4D0C8 */
    --card-foreground: 0 0% 0%;  /* Black text */
    
    --popover: 0 0% 82%;         /* Match card */
    --popover-foreground: 0 0% 0%; /* Match card text */
    
    --primary: 220 100% 25%;     /* Windows 98 blue header #000080 */
    --primary-foreground: 0 0% 100%; /* White text on blue */
    
    --secondary: 0 0% 87%;       /* Lighter gray for 3D effects */
    --secondary-foreground: 0 0% 0%; /* Black text */
    
    --muted: 0 0% 83%;           /* Muted gray background */
    --muted-foreground: 0 0% 33%; /* Dark gray text */
    
    --accent: 220 100% 50%;      /* Bright blue for selections #0000FF */
    --accent-foreground: 0 0% 100%; /* White text on accent */
    
    --destructive: 0 85% 60%;    /* Red for error messages */
    --destructive-foreground: 0 0% 100%; /* White text on destructive */
    
    --border: 0 0% 0%;           /* Black for borders */
    --input: 0 0% 100%;          /* White for input fields */
    --ring: 220 100% 25%;        /* Blue for focus rings */
    
    /* Windows 98 sharp corners */
    --radius: 0;
  }
}

@layer utilities {
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .perspective {
    perspective: 1500px;
    height: 100%;
  }
  
  .preserve-3d {
    transform-style: preserve-3d;
  }
  
  .backface-hidden {
    backface-visibility: hidden;
  }
  
  .rotate-y-180 {
    transform: rotateY(180deg);
  }
  
  /* Study With Me Animations and Effects */
  @keyframes pulse-very-slow {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.85;
    }
  }
  
  @keyframes pulse-slow {
    0%, 100% {
      opacity: 0.8;
    }
    50% {
      opacity: 0.3;
    }
  }
  
  @keyframes pulse-slower {
    0%, 100% {
      opacity: 0.8;
    }
    50% {
      opacity: 0.4;
    }
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }
  
  @keyframes particle-drift {
    0% {
      transform: translate(0, 0);
      opacity: 0;
    }
    20% {
      opacity: 0.6;
    }
    80% {
      opacity: 0.6;
    }
    100% {
      transform: translate(var(--tx, 100px), var(--ty, -100px));
      opacity: 0;
    }
  }
  
  .animate-pulse-very-slow {
    animation: pulse-very-slow 4s ease-in-out infinite;
  }
  
  .animate-pulse-slow {
    animation: pulse-slow 3s ease-in-out infinite;
  }
  
  .animate-pulse-slower {
    animation: pulse-slower 5s ease-in-out infinite;
  }
  
  .animate-float {
    animation: float 6s ease-in-out infinite;
  }
  
  .particle {
    animation: particle-drift 20s ease-out forwards;
    --tx: 100px;
    --ty: -100px;
    pointer-events: none;
  }
  
  .particle:nth-child(odd) {
    --tx: -120px;
    --ty: -80px;
  }
  
  .particle:nth-child(3n) {
    --tx: 60px;
    --ty: -150px;
  }
  
  .particle:nth-child(3n+1) {
    --tx: -80px;
    --ty: -50px;
  }
  
  .particle:nth-child(5n) {
    --tx: 120px;
    --ty: -40px;
  }
  
  .particle-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    pointer-events: none;
    z-index: 1;
  }
  
  /* Progress bar color matching for cards */
  /* Blue card progress bar */
  .from-blue-500.to-blue-600 [role="progressbar"] > div > div {
    background: #3b82f6 !important; /* Tailwind blue-500 */
  }
  
  /* Green card progress bar */
  .from-emerald-500.to-emerald-600 [role="progressbar"] > div > div {
    background: #10b981 !important; /* Tailwind emerald-500 */
  }
  
  /* Purple card progress bar */
  .from-purple-500.to-purple-600 [role="progressbar"] > div > div {
    background: #8b5cf6 !important; /* Tailwind purple-500 */
  }
  
  /* Amber card progress bar */
  .from-amber-500.to-amber-600 [role="progressbar"] > div > div {
    background: #f59e0b !important; /* Tailwind amber-500 */
  }

  /* Dark Mode and Winter Theme Enhanced Utilities */
  /* Global overrides for ALL cards in dark/winter mode */
  .theme-dark .Card,
  .theme-dark [class*="Card"],
  .theme-dark div[class*="card"],
  .theme-dark div[class*="shadow"],
  .theme-winter .Card,
  .theme-winter [class*="Card"],
  .theme-winter div[class*="card"],
  .theme-winter div[class*="shadow"],
  .theme-dark .bg-card,
  .theme-winter .bg-card,
  .theme-dark [class*="rounded-lg border bg-card"],
  .theme-winter [class*="rounded-lg border bg-card"] {
    background-color: hsl(var(--card)) !important; 
    color: hsl(var(--card-foreground)) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5) !important;
    border: 1px solid hsl(var(--border)) !important;
  }
  
  /* Target all white backgrounds and make them dark */
  .theme-dark .bg-white,
  .theme-winter .bg-white {
    background-color: hsl(var(--card)) !important;
    color: hsl(var(--card-foreground)) !important;
  }
  
  /* Direct selector for shadcn Card components */
  .theme-dark [data-radix-popper-content-wrapper] > div,
  .theme-winter [data-radix-popper-content-wrapper] > div {
    background-color: hsl(var(--card)) !important;
    color: hsl(var(--card-foreground)) !important;
  }
  
  /* Ensure all text in cards is visible */
  .theme-dark .Card p,
  .theme-dark [class*="Card"] p,
  .theme-dark div[class*="card"] p,
  .theme-winter .Card p,
  .theme-winter [class*="Card"] p,
  .theme-winter div[class*="card"] p,
  .theme-dark h1, .theme-dark h2, .theme-dark h3, .theme-dark h4, .theme-dark h5,
  .theme-winter h1, .theme-winter h2, .theme-winter h3, .theme-winter h4, .theme-winter h5 {
    color: hsl(var(--card-foreground)) !important;
  }
  
  /* Direct override for shadcn Card component */
  .theme-dark div[class^="rounded-lg"],
  .theme-dark div[class*=" rounded-lg"],
  .theme-winter div[class^="rounded-lg"],
  .theme-winter div[class*=" rounded-lg"] {
    background-color: hsl(var(--card)) !important;
    color: hsl(var(--card-foreground)) !important;
  }
  
  .theme-dark .card-enhanced,
  .theme-winter .card-enhanced {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    border: 1px solid hsl(var(--border));
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    background-color: hsl(var(--card)); /* Ensure card bg color is applied */
    color: hsl(var(--card-foreground)); /* Ensure text color is applied */
  }
  
  .theme-dark .card-enhanced:hover,
  .theme-winter .card-enhanced:hover {
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.6);
    transform: translateY(-2px);
  }
  
  .theme-dark .hover-highlight,
  .theme-winter .hover-highlight {
    transition: background-color 0.2s ease;
  }
  
  .theme-dark .hover-highlight:hover,
  .theme-winter .hover-highlight:hover {
    background-color: hsl(var(--muted) / 0.7);
  }
  
  .theme-dark .active-scale,
  .theme-winter .active-scale {
    transition: transform 0.1s ease;
  }
  
  .theme-dark .active-scale:active,
  .theme-winter .active-scale:active {
    transform: scale(0.98);
  }
  
  .theme-dark .interactive-row,
  .theme-winter .interactive-row {
    border-bottom: 1px dashed hsl(var(--border));
    transition: background-color 0.2s ease;
    background-color: hsl(var(--card)); /* Ensure darker bg color is applied */
  }
  
  .theme-dark .interactive-row:hover,
  .theme-winter .interactive-row:hover {
    background-color: hsl(var(--muted) / 0.5);
  }
  
  .theme-dark .text-enhanced,
  .theme-winter .text-enhanced {
    color: hsl(var(--foreground));
    font-weight: 500;
  }
  
  .theme-dark .subtle-glow,
  .theme-winter .subtle-glow {
    box-shadow: 0 0 15px hsl(var(--accent) / 0.15);
  }
  
  /* Force text color in specific elements */
  .theme-dark .force-text-light,
  .theme-winter .force-text-light {
    color: hsl(0 0% 98%) !important;
  }
  
  /* Windows 98 Specific Styles */
  /* Reset all border radii */
  .theme-retro * {
    border-radius: 0 !important;
  }
  
  /* Override body background to exact Win98 silver */
  .theme-retro body {
    background-color: #C0C0C0 !important;
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAPSURBVAiZYzhy+OB/BgYGADzyBBkcOTDkAAAAAElFTkSuQmCC") !important;
  }

  /* Win98-style card/window with proper borders */
  .theme-retro .Card,
  .theme-retro [class*="Card"],
  .theme-retro div[class*="card"],
  .theme-retro div[class*="shadow"],
  .theme-retro .bg-card,
  .theme-retro [class*="rounded-lg border bg-card"] {
    border-width: 2px !important;
    border-style: solid !important;
    border-color: #DFDFDF #808080 #808080 #DFDFDF !important;
    box-shadow: 1px 1px 0px rgba(0, 0, 0, 0.2) !important;
    background-color: #D4D0C8 !important;
    color: black !important;
    margin-bottom: 8px !important;
  }
  
  /* Specific styling for card headers - Windows 98 blue title bar */
  .theme-retro [class*="CardHeader"],
  .theme-retro .CardHeader,
  .theme-retro div[class*="card-header"] {
    background: linear-gradient(90deg, #000080, #1084d0) !important;
    color: white !important;
    font-weight: bold !important;
    padding: 3px 4px 3px 4px !important;
    border-bottom: 1px solid #808080 !important;
    margin: -1px -1px 0 -1px !important;
    display: flex !important;
    align-items: center !important;
  }
  
  /* Windows 98-style title text */
  .theme-retro [class*="CardHeader"] h1,
  .theme-retro [class*="CardHeader"] h2,
  .theme-retro [class*="CardHeader"] h3,
  .theme-retro [class*="CardTitle"],
  .theme-retro .card-title {
    color: white !important;
    font-size: 12px !important;
    font-weight: bold !important;
    letter-spacing: 0 !important;
    line-height: 1.2 !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  
  /* Card content padding to match Win98 */
  .theme-retro [class*="CardContent"] {
    padding: 8px !important;
    background-color: #D4D0C8 !important;
  }

  /* Main summary cards with colored headers */
  .theme-retro .progress-card {
    border-width: 2px !important;
    border-style: solid !important;
    border-color: #DFDFDF #808080 #808080 #DFDFDF !important;
    margin-bottom: 2px !important;
    background-color: #D4D0C8 !important;
    box-shadow: 1px 1px 0px rgba(0, 0, 0, 0.2) !important;
  }
  
  /* Common title bar styles for all progress cards */
  .theme-retro .progress-card > div > div:first-child {
    height: 20px !important;
    display: flex !important;
    align-items: center !important;
    font-size: 11px !important;
    font-weight: bold !important;
    padding: 0 4px !important;
    margin: 0 !important;
    color: white !important;
  }
  
  /* Progress card blue header */
  .theme-retro .progress-card-blue > div > div:first-child {
    background: linear-gradient(90deg, #0000A0, #0078D7) !important;
  }
  
  /* Progress card green header */
  .theme-retro .progress-card-green > div > div:first-child {
    background: linear-gradient(90deg, #008000, #00A000) !important;
  }
  
  /* Progress card purple header */
  .theme-retro .progress-card-purple > div > div:first-child {
    background: linear-gradient(90deg, #800080, #B000B0) !important;
  }
  
  /* Progress card amber header */
  .theme-retro .progress-card-amber > div > div:first-child {
    background: linear-gradient(90deg, #A05000, #D07000) !important;
  }
  
  /* Progress bar in Windows 98 style */
  .theme-retro .progress-card [role="progressbar"] {
    height: 14px !important;
    border: 2px inset #808080 !important;
    background: white !important;
    box-shadow: inset 1px 1px 1px rgba(0, 0, 0, 0.1) !important;
    margin-top: 5px !important;
  }
  
  .theme-retro .progress-card [role="progressbar"] > div {
    background: white !important;
  }
  
  /* Highly specific selectors to ensure color overrides */
  .theme-retro .progress-card.progress-card-blue [role="progressbar"] > div > div,
  .theme-retro div.progress-card-blue div[role="progressbar"] > div > div {
    background: #0078D7 !important;
  }
  
  .theme-retro .progress-card.progress-card-green [role="progressbar"] > div > div,
  .theme-retro div.progress-card-green div[role="progressbar"] > div > div {
    background: #00A000 !important;
  }
  
  .theme-retro .progress-card.progress-card-purple [role="progressbar"] > div > div,
  .theme-retro div.progress-card-purple div[role="progressbar"] > div > div {
    background: #B000B0 !important;
  }
  
  .theme-retro .progress-card.progress-card-amber [role="progressbar"] > div > div,
  .theme-retro div.progress-card-amber div[role="progressbar"] > div > div {
    background: #D07000 !important;
  }
  
  /* Windows 98 raised button look */
  .theme-retro button, 
  .theme-retro .btn, 
  .theme-retro [role="button"],
  .theme-retro [class*="Button"] {
    border-width: 2px !important;
    border-style: solid !important;
    border-color: #DFDFDF #808080 #808080 #DFDFDF !important;
    box-shadow: 1px 1px 0px rgba(0, 0, 0, 0.2) !important;
    background-color: #D4D0C8 !important;
    color: black !important;
    transition: none !important;
    min-height: 22px !important;
    padding: 1px 8px !important;
    font-size: 11px !important;
    font-weight: normal !important;
  }
  
  /* Pressed button state */
  .theme-retro button:active, 
  .theme-retro .btn:active, 
  .theme-retro [role="button"]:active,
  .theme-retro [class*="Button"]:active {
    border-color: #808080 #DFDFDF #DFDFDF #808080 !important;
    box-shadow: inset 1px 1px 1px rgba(0, 0, 0, 0.1) !important;
    padding: 2px 7px 0px 9px !important;
  }
  
  /* Windows 98 checkboxes */
  .theme-retro input[type="checkbox"], 
  .theme-retro input[type="radio"],
  .theme-retro [role="checkbox"] {
    appearance: none !important;
    -webkit-appearance: none !important;
    border: 2px inset #FFFFFF !important;
    background: white !important;
    width: 13px !important;
    height: 13px !important;
    position: relative !important;
    box-shadow: inset -1px -1px #DFDFDF, inset 1px 1px #808080 !important;
  }
  
  .theme-retro input[type="checkbox"]:checked::before,
  .theme-retro [role="checkbox"][data-state="checked"]::before {
    content: "✓" !important;
    display: block !important;
    position: absolute !important;
    top: -3px !important;
    left: 1px !important;
    font-size: 11px !important;
    color: black !important;
  }
  
  /* Windows 98 inputs */
  .theme-retro input[type="text"], 
  .theme-retro input[type="email"],
  .theme-retro input[type="password"],
  .theme-retro textarea,
  .theme-retro [role="textbox"],
  .theme-retro select {
    border: 2px inset #808080 !important;
    background: white !important;
    color: black !important;
    padding: 1px 2px !important;
    box-shadow: inset 1px 1px 1px rgba(0, 0, 0, 0.1) !important;
  }
  
  /* Windows 98 progress bar */
  .theme-retro progress,
  .theme-retro [role="progressbar"] {
    height: 16px !important;
    border: 2px inset #808080 !important;
    background: white !important;
    box-shadow: inset 1px 1px 1px rgba(0, 0, 0, 0.1) !important;
  }
  
  .theme-retro progress::-webkit-progress-bar,
  .theme-retro [role="progressbar"] > div {
    background: white !important;
  }
  
  .theme-retro progress::-webkit-progress-value,
  .theme-retro [role="progressbar"] > div > div {
    background: #0078D7 !important;
  }
  
  /* Ensure proper styling for task list rows */
  .theme-retro .interactive-row {
    background-color: #D4D0C8 !important;
    border-bottom: 1px solid #808080 !important;
    padding: 2px 4px !important;
  }
  
  .theme-retro .interactive-row:hover {
    background-color: #E0E0E0 !important;
  }
  
  /* Win98 style table borders */
  .theme-retro table,
  .theme-retro [role="table"] {
    border: 2px inset #808080 !important;
    background: white !important;
  }
  
  .theme-retro th,
  .theme-retro [role="columnheader"] {
    background-color: #D4D0C8 !important; 
    border: 1px outset #D4D0C8 !important;
    font-weight: bold !important;
    text-align: center !important;
  }
  
  .theme-retro td,
  .theme-retro [role="cell"] {
    border: 1px solid #808080 !important;
    padding: 2px 4px !important;
  }
  
  /* Button groups/toolbars */
  .theme-retro .btn-group,
  .theme-retro [role="toolbar"] {
    display: flex !important;
    background-color: #D4D0C8 !important;
    padding: 2px !important;
    border: 2px outset #D4D0C8 !important;
  }
  
  /* Special windows 98 emoji picker */
  .theme-retro .emoji-grid {
    display: grid !important;
    grid-template-columns: repeat(5, 1fr) !important;
    gap: 2px !important;
    background-color: white !important;
    border: 2px inset #808080 !important;
    padding: 2px !important;
  }
  
  .theme-retro .emoji-grid button {
    width: 24px !important;
    height: 24px !important;
    padding: 2px !important;
    font-size: 16px !important;
    line-height: 1 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  
  /* Date/Time display in Windows98 style */
  .theme-retro .datetime-display {
    background: #C0C0C0 !important;
    border: 2px inset #808080 !important;
    font-family: 'MS Sans Serif', sans-serif !important;
    font-size: 11px !important;
    padding: 2px 4px !important;
    color: black !important;
    display: inline-block !important;
  }
}